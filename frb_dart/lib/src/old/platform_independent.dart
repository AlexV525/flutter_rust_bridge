import 'package:meta/meta.dart';

/// An exception that is generated by Rust code.
@immutable
class FfiException {
  /// The error code of the exception.
  final String code;

  /// The error message of the exception.
  final String message;

  /// The error details of the exception. Optional.
  final Object? details;

  const FfiException(this.code, this.message, [this.details]);

  @override
  String toString() => 'FfiException($code, $message, $details)';
}

/// Exception when timeout happens using [FlutterRustBridgeTimeoutMixin]
@immutable
class FlutterRustBridgeTimeoutException {
  /// The duration to trigger timeout
  final Duration duration;

  /// debugName of the task, usually the ffi function name
  final String debugName;

  /// The stack trace of the error
  final StackTrace stackTrace;

  const FlutterRustBridgeTimeoutException(this.duration, this.debugName, this.stackTrace);

  @override
  String toString() =>
      'FlutterRustBridgeTimeoutException(debugName=$debugName, duration=$duration, stackTrace=$stackTrace)';
}
