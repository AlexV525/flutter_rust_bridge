/// NOTE: This file is auto-generated by frb_internal. Please do not manually modify it.

import 'package:flutter_rust_bridge/flutter_rust_bridge.dart';
import 'package:flutter_rust_bridge_utils/flutter_rust_bridge_utils_web.dart';
import 'package:frb_example_pure_dart/src/rust/api/pseudo_manual/stream_twin_rust_async.dart';
import 'package:frb_example_pure_dart/src/rust/frb_generated.dart';
import 'package:test/test.dart';

import 'dart_valgrind_test_entrypoint.dart' as dart_valgrind_test_entrypoint;

Future<void> main() async {
  await dartWebTestEntrypoint(() async {
    await RustLib.init();

    test('call funcStreamReturnErrorTwinRustAsync', () async {
      await expectLater(
        () async {
          await for (final _ in funcStreamReturnErrorTwinRustAsync()) {}
        },
        throwsA(isA<AnyhowException>()
            .having((x) => x.message, 'message', 'deliberate error')),
      );
    });
    return;

    await dart_valgrind_test_entrypoint.callFileEntrypoints();
  });
}
